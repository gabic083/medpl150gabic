<script>
    const story = {
        start: {
            text: "You're lying in bed when your phone buzzes. It's a text from your friend: 'Kris is having a party at 155 S 2nd. You should comee, Adrian will be there ;)'",
            color: "#f0f2f5",
            options: [
                { text: "Get up, find outfit", next: "outfit" },
                { text: "Stay in bed, order Uber Eats", next: "stay_in" }
            ]
        },
        outfit: {
            text: "You've got your outfit on and you're feeling yourself. How are you getting to 155 S 2nd?",
            color: "#ffb3ba",
            options: [
                { text: "Take an Uber", next: "uber" }, 
                { text: "Take the train", next: "train" }
            ]
        },
        uber: {
            text: "The Uber drops you off. You can hear the music from the street.",
            color: "#ffb3ba",
            options: [
                { text: "Wait outside for your friend", next: "wait" }, 
                { text: "Go inside, she'll meet u later", next: "inside" }
            ]
        },
        wait: {
            text: "You wait outside. Someone comes up besides u and lights a cigarette. You realize this vibe isn't for you tonight.",
            color: "#ffb3ba",
            options: [{ text: "Start over...", next: "start" }]
        },
        inside: {
            text: "You walk in and your heart drops. You see Adrian with another girl. You are upset and need to get out of there.",
            color: "#ffb3ba",
            options: [
                { text: "Go home and order Uber Eats", next: "stay_in" },
                { text: "Go outside for a smoke", next: "stranger_meet" }
            ]
        },
        stranger_meet: {
            text: "You step outside to clear your head. A stranger approaches you for a light. You feel an instant, magnetic allure. You end up talking for 4 hours, connecting deeper than you ever have with anyone.",
            color: "#e0bbff",
            options: [{ text: "One year later...", next: "space_choice" }]
        },
        space_choice: {
            text: "A year has passed, and your bond is unbreakable. But now, he has been offered the biggest space mission in history. What do you do?",
            color: "#e0bbff",
            options: [
                { text: "Love him from Earth", next: "ENDING_EARTH" },
                { text: "Go to the stars with him", next: "ENDING_SPACE" }
            ]
        },
        // ... (Keep your existing 'train' and 'stay_in' logic here)
    };

    let i = 0;
    let speed = 40; 

    function loadScene(id) {
        // Check if the choice is a special redirect to a new page
        if (id === "ENDING_EARTH") {
            window.location.href = "ending-earth.html";
            return;
        }
        if (id === "ENDING_SPACE") {
            window.location.href = "ending-space.html";
            return;
        }

        const scene = story[id];
        const textContainer = document.getElementById('text');
        const optionsDiv = document.getElementById('options');
        
        i = 0;
        textContainer.innerHTML = '';
        optionsDiv.innerHTML = '';
        document.body.style.backgroundColor = scene.color;

        typeWriter(scene.text, () => {
            scene.options.forEach(o => {
                const btn = document.createElement('button');
                btn.innerText = o.text;
                btn.onclick = () => loadScene(o.next);
                optionsDiv.appendChild(btn);
            });
        });
    }

    function typeWriter(text, callback) {
        if (i < text.length) {
            document.getElementById("text").innerHTML += text.charAt(i);
            i++;
            setTimeout(() => typeWriter(text, callback), speed);
        } else {
            callback(); 
        }
    }

    loadScene('start');
</script>
