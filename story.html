<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Connection</title>
    <style>
        body { 
            background-color: #050505; 
            color: #e0e0e0; 
            font-family: 'Courier New', Courier, monospace; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            transition: background 1.5s ease; 
        }
        #game-box { 
            background: rgba(5, 5, 5, 0.95); 
            padding: 40px; 
            border: 1px solid #222;
            border-radius: 2px; 
            max-width: 600px; 
            width: 90%; 
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        #text { font-size: 1.1rem; line-height: 1.8; color: #c0c0c0; margin-bottom: 25px; }
        .options { display: flex; flex-direction: column; gap: 12px; }
        button { 
            padding: 15px; cursor: pointer; border: 1px solid #333; 
            background: #000; color: #666; font-family: inherit;
            text-transform: uppercase; letter-spacing: 2px;
            transition: all 0.5s; opacity: 0; animation: fadeIn 0.8s forwards;
        }
        button:hover { background: #000; color: #fff; border-color: #ff00ff; box-shadow: 0 0 15px rgba(255, 0, 255, 0.4); }
        @keyframes fadeIn { to { opacity: 1; } }
        .home-btn { margin-top: 20px; text-align: center; color: #333; text-decoration: none; font-size: 0.7rem; }
    </style>
</head>
<body>

<div id="game-box">
    <div id="text"></div>
    <div id="options" class="options"></div>
    <a href="index.html" class="home-btn">TERMINAL_EXIT</a>
</div>

<script>
    const gameStory = {
        start: {
            text: "You're lying in bed when your phone buzzes. It's a text from Emily: 'Kris is having a party at 155 S 2nd. You should come, Adrian will be there ;)'",
            color: "#050505",
            options: [
                { text: "Get up, find outfit", next: "outfit" },
                { text: "Stay in bed, order Uber Eats", next: "stay_in" }
            ]
        },
        outfit: {
            text: "You find an outfit. You put it on and feel like yourself. How are you getting to 155 S 2nd?",
            color: "#1a001a", 
            options: [
                { text: "Take an Uber", next: "uber" }, 
                { text: "Take the train", next: "train" }
            ]
        },
        uber: {
            text: "The Uber drops you off. You hear the music of the party from the street. You've arrived earlier than Emily.",
            color: "#000b1e",
            options: [
                { text: "Wait outside for your friend", next: "wait" }, 
                { text: "Go inside, she'll meet you in there", next: "inside" }
            ]
        },
        wait: {
            text: "You wait outside. Someone comes up next to you and lights a cigarette. You feel an instant, magnetic allure.",
            color: "#2a002a", 
            options: [{ text: "Talk to them", next: "romance_1" }]
        },
        inside: {
            text: "Your heart sinks. You spot Adrian, but heâ€™s with another girl. You need to get some air.",
            color: "#1e0000", 
            options: [
                { text: "Just go home and order Uber Eats", next: "stay_in" },
                { text: "Go outside for a smoke", next: "wait" }
            ]
        },
        train: {
            text: "The train car is cold. You're not feeling very social, in fact, you feel very overstimulated.",
            color: "#001a1a", 
            options: [
                { text: "Look out the window", next: "window" }, 
                { text: "Open Tinder", next: "tinder_train" }
            ]
        },
        window: {
            text: "A stranger catches your eye and you can't help but smile when they look at you. Should you acknowledge them?",
            color: "#001a1a",
            options: [
                { text: "Say hi", next: "romance_1" }, 
                { text: "Smile and walk away", next: "train_follow" }
            ]
        },
        train_follow: {
            text: "He follows you onto the platform. 'I just had to say hi,' he says awkwardly. 'I really like your scarf.' You realize you're both heading toward the exit for S 2nd. It turns out, he's going to Kris's party too.",
            color: "#2a002a",
            options: [{ text: "Continue talking", next: "station_decision" }]
        },
        station_decision: {
            text: "Standing at the top of the stairs, the city humming around you, he looks at the address on his phone. 'I'm Adrian's cousin,' he admits. 'But honestly? I'm not really a party person.'",
            color: "#1a001a",
            options: [
                { text: "Go to the party together", next: "romance_1" },
                { text: "Go to a nearby coffee house instead", next: "romance_1" }
            ]
        },
        tinder_train: {
            text: "The signal drops in and out. You're scrolling through faces, looking for something that feels real.",
            color: "#001a1a",
            options: [
                { text: "Talk to someone new", next: "missed_stop" }, 
                { text: "Respond to the person you liked", next: "romance_1" }
            ]
        },
        missed_stop: {
            text: "You're caught in a rabbit hole of eternal matches. Total dissatisfaction. A doomscroll of meaningless connections. You don't notice the stops passing by.",
            color: "#001a1a",
            options: [{ text: "The cycle continues...", next: "ENDING_TRAIN" }]
        },
        stay_in: {
            text: "Food is on the way. You open Tinder. You match with someone who has kind eyes; he's only in town for a few days, but the connection is present.",
            color: "#050505",
            options: [
                { text: "Keep talking to the connection", next: "romance_1" },
                { text: "Reply to a new match John: 'Heyy'", next: "john_trap" }
            ]
        },
        john_trap: {
            text: "You reply to John. You try to get up to meet your delivery, but you find you cannot. Your body feels heavy in the bed.",
            color: "#111111",
            options: [
                { text: "Call for help", next: "help_trap" },
                { text: "Take a nap, maybe this is a bad dream", next: "ENDING_BED" }
            ]
        },
        help_trap: {
            text: "You try to call for help, but you cannot close the Tinder app. It's the only thing on your screen. You can't get your phone to function. You are stuck.",
            color: "#111111",
            options: [{ text: "Accept the fever dream", next: "ENDING_BED" }]
        },
        romance_1: {
            text: "The first 4 hours feel surreal. The chaos of the city is minimized to faint background noise. You don't feel time passing. He tells you of his days studying Astro, and of his astonishment with the universe. You love listening to him talk. You can't fathom not having known this person.",
            color: "#1a0033", 
            options: [{ text: "Let the night blur...", next: "romance_2" }]
        },
        romance_2: {
            text: "6 months in. The newness is replaced by a warm gravity. You've seen the maps of his mind, the obsession with the unknown. He is entrenched in his work, and you in him.",
            color: "#0a0026", 
            options: [{ text: "Time accelerates...", next: "romance_3" }]
        },
        romance_3: {
            text: "One year. His work demands more of him. He tells you he's been chosen for the biggest US space mission currently, he has to go to the moon.",
            color: "#000000", 
            options: [
                { text: "Go and leave everything behind", next: "ENDING_SPACE" },
                { text: "Love him From Earth", next: "ENDING_EARTH" }
            ]
        }
    };

    let typingIdx = 0;
    const typingSpd = 40; 

    function runScene(id) {
        const redirects = {
            "ENDING_EARTH": "ending-earth.html",
            "ENDING_SPACE": "ending-space.html",
            "ENDING_TRAIN": "ending-train.html",
            "ENDING_BED": "ending-bed.html"
        };

        if (redirects[id]) {
            window.location.href = redirects[id];
            return;
        }

        const data = gameStory[id];
        if (!data) return;

        const txtBox = document.getElementById('text');
        const optBox = document.getElementById('options');
        
        typingIdx = 0;
        txtBox.innerHTML = '';
        optBox.innerHTML = '';
        document.body.style.backgroundColor = data.color;

        function doType() {
            if (typingIdx < data.text.length) {
                txtBox.innerHTML += data.text.charAt(typingIdx);
                typingIdx++;
                setTimeout(doType, typingSpd);
            } else {
                data.options.forEach(o => {
                    const b = document.createElement('button');
                    b.innerText = o.text;
                    b.onclick = () => runScene(o.next);
                    optBox.appendChild(b);
                });
            }
        }
        doType();
    }

    window.onload = () => runScene('start');
</script>
</body>
</html>
